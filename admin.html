<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحكم المتجر</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: "Cairo", sans-serif;
        }
        
        body {
            background: #f5f7fa;
            padding: 20px;
            direction: rtl;
        }
        
        .admin-container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        .header {
            background: linear-gradient(135deg, #FF6B8B, #E05575);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(255, 107, 139, 0.3);
        }
        
        .section {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .section h3 {
            color: #FF6B8B;
            margin-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: #FF6B8B;
            outline: none;
        }
        
        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin: 5px 0;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #FF6B8B, #E05575);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #06D6A0, #05b88c);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ff4757, #ff3838);
            color: white;
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #4ECDC4, #3BB4AC);
            color: white;
        }
        
        .product-item {
            border: 2px dashed #FF6B8B;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            background: #f8fafc;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-weight: 600;
        }
        
        .tab.active {
            background: #FF6B8B;
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .login-screen {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-top: 50px;
        }
        
        .login-screen h2 {
            color: #FF6B8B;
            margin-bottom: 20px;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- شاشة الدخول -->
    <div id="loginScreen" class="login-screen">
        <h2>🔒 دخول المدير</h2>
        <div class="form-group">
            <input type="password" id="adminPassword" placeholder="أدخل كلمة المرور" style="text-align: center;">
        </div>
        <button class="btn btn-primary" onclick="login()">دخول</button>
        <p style="margin-top: 15px; color: #666; font-size: 14px;">
            كلمة المرور الافتراضية: admin123
        </p>
    </div>

    <!-- لوحة التحكم الرئيسية -->
    <div id="adminPanel" class="admin-container hidden">
        <div class="header">
            <h1>🛠️ لوحة تحكم المتجر</h1>
            <p>إدارة جميع إعدادات المتجر من هنا</p>
        </div>

        <!-- ألسنة التبويب -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab('products')">🛍️ المنتجات</button>
            <button class="tab" onclick="switchTab('delivery')">🚚 التوصيل</button>
            <button class="tab" onclick="switchTab('settings')">⚙️ الإعدادات</button>
        </div>

        <!-- قسم المنتجات -->
        <div id="products" class="tab-content active">
            <div class="section">
                <h3>📦 إدارة المنتجات</h3>
                <div id="productsList">
                    <!-- سيتم ملؤها بالمنتجات -->
                </div>
                <button class="btn btn-secondary" onclick="addNewProduct()">
                    ➕ إضافة منتج جديد
                </button>
            </div>
        </div>

        <!-- قسم التوصيل -->
        <div id="delivery" class="tab-content">
            <div class="section">
                <h3>🗺️ أسعار التوصيل</h3>
                <div class="form-group">
                    <label>اختر الولاية:</label>
                    <select id="wilayaSelect" onchange="loadWilayaPrice()">
                        <option value="">-- اختر الولاية --</option>
                    </select>
                </div>
                <div id="wilayaPriceForm" class="hidden">
                    <div class="form-group">
                        <label>سعر التوصيل للمنزل:</label>
                        <input type="number" id="homePrice" placeholder="السعر">
                    </div>
                    <div class="form-group">
                        <label>سعر التوصيل للمكتب:</label>
                        <input type="number" id="deskPrice" placeholder="السعر">
                    </div>
                    <button class="btn btn-primary" onclick="saveWilayaPrice()">💾 حفظ السعر</button>
                </div>
            </div>
        </div>

        <!-- قسم الإعدادات -->
        <div id="settings" class="tab-content">
            <div class="section">
                <h3>🎯 إعدادات الخصم</h3>
                <div class="form-group">
                    <label>الحد الأدنى للكمية للخصم:</label>
                    <input type="number" id="minQuantity" min="2" value="2">
                </div>
                <div class="form-group">
                    <label>قيمة الخصم لكل قطعة (دج):</label>
                    <input type="number" id="discountValue" value="300">
                </div>
                <button class="btn btn-primary" onclick="saveDiscountSettings()">💾 حفظ الخصم</button>
            </div>

            <div class="section">
                <h3>🏪 معلومات المتجر</h3>
                <div class="form-group">
                    <label>اسم المتجر:</label>
                    <input type="text" id="storeName" placeholder="اسم المتجر">
                </div>
                <div class="form-group">
                    <label>شعار المتجر:</label>
                    <input type="text" id="storeTagline" placeholder="شعار المتجر">
                </div>
                <div class="form-group">
                    <label>أرقام الهاتف (مفصولة بفاصلة):</label>
                    <input type="text" id="storePhones" placeholder="مثال: 0671466489, 0551102155">
                </div>
                <button class="btn btn-primary" onclick="saveStoreInfo()">💾 حفظ المعلومات</button>
            </div>
        </div>

        <!-- أزرار التحكم -->
        <div class="section">
            <h3>🛡️ إجراءات النظام</h3>
            <button class="btn btn-success" onclick="saveAllSettings()">
                💾 حفظ جميع الإعدادات
            </button>
            <button class="btn btn-secondary" onclick="exportSettings()">
                📤 تصدير الإعدادات
            </button>
            <button class="btn btn-danger" onclick="resetSettings()">
                🔄 إعادة التعيين
            </button>
            <button class="btn btn-primary" onclick="goToStore()">
                🏪 الذهاب للمتجر
            </button>
            <button class="btn btn-danger" onclick="logout()">
                🚪 تسجيل الخروج
            </button>
        </div>

        <!-- استيراد الإعدادات -->
        <div class="section">
            <h3>📥 استيراد الإعدادات</h3>
            <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importSettings(this)">
            <button class="btn btn-secondary" onclick="document.getElementById('importFile').click()">
                📁 اختيار ملف الإعدادات
            </button>
        </div>
    </div>

    <script>
        // الإعدادات الافتراضية
        const DEFAULT_CONFIG = {
            PRODUCTS: {
                1: { name: "مودال 1", price: 3300, image: "images/modal1.jpg", description: "تصميم مريح وعصري..." },
                2: { name: "مودال 2", price: 3300, image: "images/modal2.jpg", description: "تصميم عملي وأنيق..." },
                // ... جميع الموديلات
            },
            DELIVERY_PRICES: {
                "01 - أدرار": { home: 1100, desk: 600 },
                "02 - الشلف": { home: 700, desk: 400 },
                // ... جميع الولايات
            },
            DISCOUNTS: {
                minQuantityForDiscount: 2,
                discountPerItem: 300
            },
            STORE_INFO: {
                name: "BEN&KRAB-Shopp",
                tagline: "متجر أفخم الملابس للأطفال",
                phoneNumbers: ["0671466489", "0551102155"]
            }
        };

        let CONFIG = { ...DEFAULT_CONFIG };

        // الدخول للنظام
        function login() {
            const password = document.getElementById('adminPassword').value;
            if (password === 'admin123') {
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('adminPanel').classList.remove('hidden');
                loadSettings();
            } else {
                alert('كلمة المرور غير صحيحة');
            }
        }

        // تسجيل الخروج
        function logout() {
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('adminPanel').classList.add('hidden');
            document.getElementById('adminPassword').value = '';
        }

        // تحميل الإعدادات
        function loadSettings() {
            const saved = localStorage.getItem('storeConfig');
            if (saved) {
                CONFIG = JSON.parse(saved);
            }
            loadProductsManagement();
            loadWilayasList();
            loadDiscountSettings();
            loadStoreInfo();
        }

        // حفظ الإعدادات
        function saveSettings() {
            localStorage.setItem('storeConfig', JSON.stringify(CONFIG));
        }

        // تبديل الألسنة
        function switchTab(tabName) {
            // إخفاء جميع المحتويات
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // إلغاء تنشيط جميع الألسنة
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // إظهار المحتوى المطلوب
            document.getElementById(tabName).classList.add('active');
            
            // تنشيط اللسان المطلوب
            event.target.classList.add('active');
        }

        // إدارة المنتجات
        function loadProductsManagement() {
            const container = document.getElementById('productsList');
            container.innerHTML = '';
            
            Object.keys(CONFIG.PRODUCTS).forEach(id => {
                const product = CONFIG.PRODUCTS[id];
                container.innerHTML += `
                    <div class="product-item">
                        <div class="form-group">
                            <label>اسم المنتج:</label>
                            <input type="text" value="${product.name}" 
                                   onchange="updateProductField(${id}, 'name', this.value)">
                        </div>
                        <div class="form-group">
                            <label>السعر (دج):</label>
                            <input type="number" value="${product.price}" 
                                   onchange="updateProductField(${id}, 'price', this.value)">
                        </div>
                        <div class="form-group">
                            <label>الصورة:</label>
                            <input type="text" value="${product.image}" 
                                   onchange="updateProductField(${id}, 'image', this.value)">
                        </div>
                        <div class="form-group">
                            <label>الوصف:</label>
                            <textarea onchange="updateProductField(${id}, 'description', this.value)">${product.description}</textarea>
                        </div>
                        <button class="btn btn-danger" onclick="removeProduct(${id})">🗑️ حذف</button>
                    </div>
                `;
            });
        }

        function updateProductField(id, field, value) {
            CONFIG.PRODUCTS[id][field] = field === 'price' ? parseInt(value) : value;
        }

        function addNewProduct() {
            const newId = Object.keys(CONFIG.PRODUCTS).length + 1;
            CONFIG.PRODUCTS[newId] = {
                name: `مودال ${newId}`,
                price: 3300,
                image: `images/modal${newId}.jpg`,
                description: "وصف المنتج الجديد"
            };
            loadProductsManagement();
        }

        function removeProduct(id) {
            if (Object.keys(CONFIG.PRODUCTS).length > 1) {
                delete CONFIG.PRODUCTS[id];
                loadProductsManagement();
            } else {
                alert("لا يمكن حذف جميع المنتجات");
            }
        }

        // إدارة التوصيل
        function loadWilayasList() {
            const select = document.getElementById('wilayaSelect');
            select.innerHTML = '<option value="">-- اختر الولاية --</option>';
            Object.keys(CONFIG.DELIVERY_PRICES).forEach(wilaya => {
                select.innerHTML += `<option value="${wilaya}">${wilaya}</option>`;
            });
        }

        function loadWilayaPrice() {
            const wilaya = document.getElementById('wilayaSelect').value;
            const form = document.getElementById('wilayaPriceForm');
            
            if (wilaya) {
                const prices = CONFIG.DELIVERY_PRICES[wilaya];
                document.getElementById('homePrice').value = prices.home;
                document.getElementById('deskPrice').value = prices.desk;
                form.classList.remove('hidden');
            } else {
                form.classList.add('hidden');
            }
        }

        function saveWilayaPrice() {
            const wilaya = document.getElementById('wilayaSelect').value;
            CONFIG.DELIVERY_PRICES[wilaya].home = parseInt(document.getElementById('homePrice').value);
            CONFIG.DELIVERY_PRICES[wilaya].desk = parseInt(document.getElementById('deskPrice').value);
            alert('✅ تم حفظ سعر التوصيل لـ ' + wilaya);
        }

        // إعدادات الخصم
        function loadDiscountSettings() {
            document.getElementById('minQuantity').value = CONFIG.DISCOUNTS.minQuantityForDiscount;
            document.getElementById('discountValue').value = CONFIG.DISCOUNTS.discountPerItem;
        }

        function saveDiscountSettings() {
            CONFIG.DISCOUNTS.minQuantityForDiscount = parseInt(document.getElementById('minQuantity').value);
            CONFIG.DISCOUNTS.discountPerItem = parseInt(document.getElementById('discountValue').value);
            alert('✅ تم حفظ إعدادات الخصم');
        }

        // معلومات المتجر
        function loadStoreInfo() {
            document.getElementById('storeName').value = CONFIG.STORE_INFO.name;
            document.getElementById('storeTagline').value = CONFIG.STORE_INFO.tagline;
            document.getElementById('storePhones').value = CONFIG.STORE_INFO.phoneNumbers.join(', ');
        }

        function saveStoreInfo() {
            CONFIG.STORE_INFO.name = document.getElementById('storeName').value;
            CONFIG.STORE_INFO.tagline = document.getElementById('storeTagline').value;
            CONFIG.STORE_INFO.phoneNumbers = document.getElementById('storePhones').value.split(',').map(p => p.trim());
            alert('✅ تم حفظ معلومات المتجر');
        }

        // الإجراءات الرئيسية
        function saveAllSettings() {
            saveSettings();
            alert('✅ تم حفظ جميع الإعدادات بنجاح!');
        }

        function resetSettings() {
            if (confirm('⚠️ هل أنت متأكد من إعادة تعيين جميع الإعدادات؟ سيتم فقدان جميع التغييرات!')) {
                localStorage.removeItem('storeConfig');
                CONFIG = { ...DEFAULT_CONFIG };
                loadSettings();
                alert('✅ تم إعادة التعيين بنجاح');
            }
        }

        function exportSettings() {
            const dataStr = JSON.stringify(CONFIG, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'store-settings.json';
            link.click();
            alert('✅ تم تصدير الإعدادات');
        }

        function importSettings(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const importedConfig = JSON.parse(e.target.result);
                        CONFIG = importedConfig;
                        saveSettings();
                        loadSettings();
                        alert('✅ تم استيراد الإعدادات بنجاح!');
                    } catch (error) {
                        alert('❌ خطأ في ملف الإعدادات');
                    }
                };
                reader.readAsText(file);
            }
        }

        function goToStore() {
            window.location.href = 'index.html'; // اسم صفحة المتجر الرئيسية
        }

        // تحميل الإعدادات عند فتح الصفحة
        window.onload = function() {
            // يمكن إضافة تحميل تلقائي إذا كان المستخدم مسجلاً
            const isLoggedIn = localStorage.getItem('adminLoggedIn');
            if (isLoggedIn) {
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('adminPanel').classList.remove('hidden');
                loadSettings();
            }
        };
    </script>
</body>
</html>
